(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.serverSideRender;var r=e.n(i);const s=window.wp.data,l=window.wp.components,d=window.wp.element,c=window.ReactJSXRuntime;(0,t.registerBlockType)("petitioner/form",{title:(0,n.__)("Petitioner Form","petitioner"),icon:"forms",category:"widgets",edit:function({attributes:e,setAttributes:t}){const{formId:n,newPetitionLink:i}=e,a=(0,o.useBlockProps)(),p=(0,d.useCallback)((()=>(0,s.useSelect)((e=>e("core").getEntityRecords("postType","petitioner-petition",{per_page:-1,_fields:"title,id"})),[])),[])()||[],u=[{label:"Please select your petition",value:""}];p.forEach((e=>{let t=e.title.raw;t.length>40&&(t=t.substring(0,40)+"...");const n={label:t,value:e.id};u.push(n)}));const w=(0,d.useCallback)((()=>p.length?n?(0,c.jsx)("div",{style:{pointerEvents:"none"},children:(0,c.jsx)(r(),{block:"petitioner/form",attributes:e})}):(0,c.jsxs)("div",{style:{padding:"24px",background:"#efefef"},children:[(0,c.jsx)("p",{children:(0,c.jsx)("small",{children:"Petitioner form"})}),(0,c.jsx)("p",{children:"Use the dropdown in the block settings to select your petition."})]}):(0,c.jsxs)("div",{style:{padding:"24px",background:"#efefef"},children:[(0,c.jsx)("p",{children:(0,c.jsx)("small",{children:"Petitioner form"})}),(0,c.jsx)("p",{children:"Looks like you haven't added any forms yet!"}),(0,c.jsx)(l.Button,{variant:"secondary",href:i||"",children:"Create your first petition"})]})),[p,n,e,i]);return(0,c.jsxs)("div",{...a,children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsx)(l.PanelBody,{children:(0,c.jsx)(l.SelectControl,{label:"Selected Petition",value:n,options:u,onChange:e=>t({formId:e})})})}),(0,c.jsx)(w,{})]})},save:()=>null})})();