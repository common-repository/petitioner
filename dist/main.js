var o=Object.defineProperty;var a=(i,e,t)=>e in i?o(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>a(i,typeof e!="symbol"?e+"":e,t);function h(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}class n{constructor(e){s(this,"handleFormSubmit",e=>{e.preventDefault(),this.wrapper.classList.add("petitioner--loading");const t=new FormData(this.formEl);fetch(this.actionPath,{method:"POST",body:t,credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(r=>r.json()).then(r=>{r.success?this.showResponseMSG("Thank you!",r.data):this.showResponseMSG("Could not submit the form.",r.data),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()}).catch(r=>{console.error("Error:",r),alert("An unexpected error occurred. Please try again later."),this.wrapper.classList.remove("petitioner--loading"),this.formEl.reset()})});var t,r;this.wrapper=e,this.wrapper&&(this.responseTitle=this.wrapper.querySelector(".petitioner__response > h3"),this.responseText=this.wrapper.querySelector(".petitioner__response > p"),this.formEl=this.wrapper.querySelector("form"),this.viewLetterBTN=this.wrapper.querySelector(".petitioner__btn--letter"),this.petitionerModal=this.wrapper.querySelector(".petitioner-modal"),this.modalClose=this.wrapper.querySelector(".petitioner-modal__close"),this.backdrop=this.wrapper.querySelector(".petitioner-modal__backdrop"),this.actionPath=(r=(t=this.formEl)==null?void 0:t.action)!=null?r:"",this.formEl.addEventListener("submit",this.handleFormSubmit),this.viewLetterBTN.addEventListener("click",()=>{this.toggleModal(!0)}),this.backdrop.addEventListener("click",()=>{this.toggleModal(!1)}),this.modalClose.addEventListener("click",()=>{this.toggleModal(!1)}))}showResponseMSG(e="Something went wrong",t="Please try again",r=!1){this.wrapper.classList.add("petitioner--submitted"),this.responseTitle.innerText=e,this.responseText.innerText=t}toggleModal(e=!0){this.petitionerModal.classList[e?"add":"remove"]("petitioner-modal--visible")}}const l=document.querySelectorAll(".petitioner");for(const i of l)new n(i);export{h as __vite_legacy_guard};
