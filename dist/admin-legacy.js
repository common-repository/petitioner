System.register([],(function(t,e){"use strict";return{execute:function(){var t=document.createElement("style");t.textContent=".wp-admin.post-type-petitioner-petition #edit-slug-box,.wp-admin.post-type-petitioner-petition #wp-admin-bar-view{display:none}\n",document.head.appendChild(t),new class{constructor(){this.total=0,this.perPage=1e3,this.tableDiv=document.getElementById("AV_Petitioner_Submissions"),this.tableDiv&&(this.entriesDiv=this.tableDiv.querySelector(".petitioner-admin__entries"),this.paginationDiv=this.tableDiv.querySelector(".petitioner-admin__pagination"),this.currentPage=1,this.formSettings={},this.handleFormSettings(),this.formSettings.formID&&(this.fetch_data(this.currentPage),this.paginationDiv.addEventListener("click",(t=>{if(t.target.classList.contains("petitioner__paging-button")){t.preventDefault();const e=parseInt(t.target.dataset.page);this.fetch_data(e)}}))))}handleFormSettings(){const t=this.tableDiv.dataset.petitionerSubmissions;this.formSettings=JSON.parse(t)}fetch_data(t){const e=`${ajaxurl}?action=petitioner_fetch_submissions&page=${t}&form_id=${this.formSettings.formID}&per_page=${this.perPage}`;console.log(e),fetch(e).then((t=>t.json())).then((t=>{const{success:e,data:i}=t;e&&(this.total=i.total,this.submissions=i.submissions,this.render_table())})).catch((t=>console.error("Error fetching data:",t)))}render_table(){const t=this.submissions?.map((t=>`<tr>\n                        <td>${t.email}</td>\n                        <td>${t.fname}</td>\n                        <td>${t.lname}</td>\n                        <td>${t.bcc_yourself?"yes":"no"}</td>\n                        <td>${t.submitted_at}</td>\n                    </tr>`)).join("");this.entriesDiv.innerHTML=`\n        <p>Total: ${this.total}</p>\n        <table class="wp-list-table widefat fixed striped table-view-list posts">\n            <thead>\n                <tr>\n                    <th>Email</th>\n                    <th>First name</th>\n                    <th>Last name</th>\n                    <th>BCC</th>\n                    <th>Submitted at</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${t}\n            </tbody>\n        </table>\n        `}}}}}));
